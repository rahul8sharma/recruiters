.trait-show
  .span15.page-title.first
    .divider1
    AID #{@assessment.id} - #{@assessment.name}
  %a.btn.btn-warning.pull-right.big-text.big.span{ href: add_users_company_custom_assessment_path(:company_id => params[:company_id], :id => params[:id]) }
    Send this Assessment
  %a.extra-medium-text.pull-right.line-height3{:href => new_company_custom_assessment_path(:company_id => params[:company_id]), :title => "Click Here To Create Custom Assessment"} 
    Create New Custom Assessment
  .clr
  .divider2
  = render :partial => "shared/suitability/user_sub_nav_#{@assessment.assessment_type}"
  .padding-all2.border-warning.shifted-up1
    - if (@assessment_factor_norms.present?)
      .big-text.font-bold
        .pull-left
          Traits Measured: #{@assessment_factor_norms.count}
       
        .pull-right.span7.first.text-center
          Expected Score Range
        .clr
      .divider1
      .scale.pull-right
        - line_width = (((@company_norm_buckets.size-1)*50)+10)
        .line{:style => "width: #{line_width}px"}
        .marker-container
          - @company_norm_buckets.each do |norm_bucket|
            .marker
              - if norm_bucket.name.split(" ").size == 1
                %br/
              = norm_bucket.name
          .clr
      .clr
      %ul.clearfix.scores_listing.first
        - marker_width = 50
        - if @assessment_factor_norms.present?
          - @assessment_factor_norms.each do |factor_norm|
            - to_norm_bucket = @norm_buckets[factor_norm.to_norm_bucket_id]
            - to_company_norm_bucket = @company_norm_buckets.detect{|bucket| bucket.norm_bucket_ids.include?(to_norm_bucket["uid"])}
            
            - from_norm_bucket = @norm_buckets[factor_norm.from_norm_bucket_id]
            - from_company_norm_bucket = @company_norm_buckets.detect{|bucket| bucket.norm_bucket_ids.include?(from_norm_bucket["uid"])}
            
            - offset = ((from_company_norm_bucket.weight - 1) * marker_width)        
            - width = (to_company_norm_bucket.weight - from_company_norm_bucket.weight) * marker_width          
            %li
              .lhs-sec.span20.first
                .factor-name
                  = factor_norm.factor.name
                .factor-description
                  = factor_norm.factor.definition
              .rhs-sec.pull-right
                .marker-set
                  - @company_norm_buckets.each do |norm_bucket|
                    .marker{ class: (from_norm_bucket["name"] == norm_bucket["name"] || to_norm_bucket["name"] == norm_bucket["name"] ) ? "show" : "" }
                      -  if norm_bucket.name.split(" ").size == 1
                        %br/
                      = norm_bucket.name
                  .clr
                .slider{:style => "width: #{line_width}px"}
                  .range{:style=>"width: #{width+10}px; margin-left: #{offset}px"}

              .clr
    - else
      .alert.medium-text
        You have not added any traits to this assessment. To add traits to this asssessment
        %a{ href: norms_company_custom_assessment_path(:company_id => params[:company_id], :id => params[:id]), title: "Add Traits" } Click here