.add-users
  .page-title.pull-left #{@assessment.name}
  %a.pull-right.medium-text.line-height2{:href=>"/help/process-explanation", :target=>"_blank", :title=>"Need help in adding Assessment Takers to this Assessment?"}
    Need help in adding Assessment Takers?
  .clr
  .divider1
  = render :partial => "shared/navigation-sub-nav"
  .divider2
  -#%a.underlined.pull-right{:href => help_adding_users_path, :target => "_blank"}
    -#View Instructions
  .clr
  .span15.first.big-text.text-center
    What is the purpose of assessing these assessment takers?
  .purpose.span8
    %label
      - checked = (params[:candidate_stage] == Vger::Resources::User::Stage::EMPLOYED)
      %input.span1{:type => "radio", :name => "candidate_stage", value: Vger::Resources::User::Stage::EMPLOYED, :onClick => "getUserType('#{Vger::Resources::User::Stage::EMPLOYED}');", checked: checked}
      #employee
        -#toggle class ".checked" to "#employee"
        .title.span.extra-medium-text.default
          For Development
        %i.muted.span.medium-text
          (Existing Employees)
        .clr
    .divider1
    %label
      - checked = (params[:candidate_stage] == Vger::Resources::User::Stage::CANDIDATE)
      %input.span1{:type => "radio", :name => "candidate_stage", value: Vger::Resources::User::Stage::CANDIDATE, :onClick => "getUserType('#{Vger::Resources::User::Stage::CANDIDATE}');", checked: checked}
      #user
        -#toggle class ".checked" to "#user"
        .title.span.extra-medium-text.default
          For Hiring
        %i.muted.span.medium-text
          (Potential Candidates)
        .clr
    .clr

  %a.label.label-warning.label-small.pull-left{:href => add_users_bulk_company_custom_assessment_path(:company_id => params[:company_id],:id => params[:id]) , :title => "USE BULK UPLOAD"}
    %b USE BULK UPLOAD
  .clr

  .divider1

  .margin-auto.span22
    -#Bulk Upload old code
      .select-user-type
        - if is_superuser?
          = render :partial => "suitability/custom_assessments/user_assessments/bulk_upload"
      .divider1
    = form_for @assessment, :as => :assessment, :url => add_users_company_custom_assessment_path(:company_id => params[:company_id], :id => params[:id]), multipart: true, method: :put do |f|
      .divider1
      %input{ type: "hidden", value: "#{params[:upload_method]}", name: "upload_method" }
      %input{ id:"candidate_stage", type: "hidden", value: "#{params[:candidate_stage]}", name: "candidate_stage" }
      %div{class: "#{checked ? 'activated':'de-activated'}"}
        .left-offset2.first
          - klass = @assessment.set_applicant_id ? "span6" : "span8"
          - if @assessment.set_applicant_id
            .span3.big-text.first
              .span Applicant Id
          .big-text.left-offset1{ class: klass }
            Assessment taker’s name
          .span9.big-text.left-offset1
            Assessment taker’s email address
          .clr
        .divider1  
        %ul.add-users.clearfix
          - 10.times do |index|
            = render :partial => "suitability/custom_assessments/user_assessments/assessment_user_assessment_fields", :locals => { :index => (index+1), :user => (params[:users].to_a[index][1] rescue {}) }
        .divider2

      %a.button.pull-left.btn.btn-warning.inverse.large-text{ disabled: !checked, href: company_custom_assessment_path(@company,@assessment) }
        Add Assessment Takers Later
      %input.pull-right.btn.btn-warning.large-text{ disabled: !checked, type: "submit", value: "Submit"}
      .clr

= javascript_include_tag 'add_users'
