.create-test.norms.add
  .inn.first
    .page-title #{@assessment.name}
  .inn.gray-gradient
    = render :partial => "shared/test-flow-sub-nav"
    .divider1
    = form_for @assessment, :as => :assessment, :url => add_candidates_company_assessment_path(:company_id => params[:company_id], :id => params[:id]), multipart: true, method: :put do |f|
      .select-candidate-type 
        %b.span.show.left-offset1
          Please select the candidate type:
        .show.left-offset1.pull-left
          %label
            - checked = (params[:candidate_stage] == Vger::Resources::Candidate::Stage::EMPLOYED)
            %input{:type => "radio", :name => "candidate_stage", value: Vger::Resources::Candidate::Stage::EMPLOYED, :onClick => "window.location='#{request.path}?candidate_stage=#{Vger::Resources::Candidate::Stage::EMPLOYED}';", checked: checked}
            Existing Employees
          %label
            - checked = (params[:candidate_stage].nil? || (params[:candidate_stage] == Vger::Resources::Candidate::Stage::CANDIDATE))
            %input{:type => "radio", :name => "candidate_stage", value: Vger::Resources::Candidate::Stage::CANDIDATE, checked: checked, :onClick => "window.location='#{request.path}?candidate_stage=#{Vger::Resources::Candidate::Stage::CANDIDATE}';"}
            Potential Employees
        .clr 
      .divider1
      .span6.left-offset1
        %b.show Full name
        (Required)
      .span6.first
        %b.show Email id
        (Required)
      .span4  
        %b.show Mobile number
        (Required)
      .span5
        %b.show Functional Area
        (For existing employees only)
      .clr
      .divider1
      %ul.add-candidates.unstyled.clearfix
        - 10.times do |index|
          = render :partial => "assessments/assessment_candidate_assessment_fields", :locals => { :index => (index+1), :candidate => (params[:candidates].to_a[index][1] rescue {}) } 
      %button.pull-right.btn.btn-info
        Proceed
      .clr
