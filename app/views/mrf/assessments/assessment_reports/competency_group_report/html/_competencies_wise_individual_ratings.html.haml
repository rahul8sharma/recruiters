- candidate_count = @report.report_hash[:competency_individual_scores].first[1].size
.competencies_wise_individual_ratings.border-bottom-grayLighter
  .container
    .divider2
    .title
      Competency-wise Individual Ratings
    .divider2
    %table.medium-text.text-center{:cellspacing=>"0", :cellpadding=>"0"}
      %tr.extra-medium-text
        %td
          Candidate names
        %td
          Overall Score
        - @report.report_hash[:competency_individual_scores].each do |competency, competency_data|
          %td
            = competency
      -candidate_count.times do |index|
        - candidate_index = index
        %tr
          %td
            = @report.report_hash[:competency_individual_scores].first[1][index][:name]
          %td
            - overall_score = 0
            - @report.report_hash[:competency_individual_scores].each_with_index do |(competency, competency_data), index|
              - overall_score += @report.report_hash[:competency_individual_scores].values[index][candidate_index]["score"].to_f
            - overall_score = overall_score / @report.report_hash[:competency_individual_scores].size
            = overall_score.round(2) rescue "-"
          - @report.report_hash[:competency_individual_scores].each_with_index do |(competency, competency_data), index|
            %td
              = @report.report_hash[:competency_individual_scores].values[index][candidate_index]["score"].to_f.round(2) rescue "-"
    .divider2
