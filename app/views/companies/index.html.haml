.companies-list
  .page-title
    .divider1
    Companies
  .pull-right
    - if (@companies.present?)
      .muted.extra-medium-text
        .span.line-height2
          Go to Page
        %select.span2{onchange:"location = this.options[this.selectedIndex].value;"}
          - @companies.total_pages.times do |page|
            %option{selected: params[:page].to_i == (page + 1),value:companies_path(@company, params.merge(:page => page + 1)), }
              = page + 1
        .clr
  .clr
  .divider2
  .list-snippet-titles.large-text.clearfix
    .span3.first
      = sort_link "EMP", companies_path, :id, params[:search]
    .span20
      = sort_link "Company Title", companies_path, :name, params[:search]
    .span4.text-center
      Test bought
    .span3
      Valid till
    .clr
    .divider1
  %ul
    - @companies.each do |company|
      %li.list-snippet.border-bottom-grayLighter
        .divider1
        .span3.first
          %a.extra-medium-text{:href => company_custom_assessments_path(:company_id => company.id), :title => "Go to #{company.name}"}
            = company.id
        .span20
          %a.extra-medium-text{:href => company_custom_assessments_path(:company_id => company.id), :title => "Go to #{company.name}"}
            = company.name
        .span4.text-center
          = company.subscription.assessments_purchased rescue 0
        .span3
          = (company.subscription ? hdate(company.subscription.valid_to) : h(nil)) rescue "-" 
        .clr
        .divider1
  .divider2
  .pull-right
    - if (@companies.present?)
      .muted.extra-medium-text
        .span.line-height2
          Go to Page
        %select.span2{onchange:"location = this.options[this.selectedIndex].value;"}
          - @companies.total_pages.times do |page|
            %option{selected: params[:page].to_i == (page + 1), value: companies_path(@company, params.merge(:page => page + 1)), }
              = page + 1
        .clr
  .clr 
        
/ .pagination.pull-right
/   = paginate @companies
